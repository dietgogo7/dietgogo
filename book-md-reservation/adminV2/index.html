<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì í˜ì´ì§€ - ì˜ˆì•½ ê´€ë¦¬ (V2)</title>
    <!-- Use new adminv2.css which includes reset and variables -->
    <link rel="stylesheet" href="../css/adminv2.css">

    <!-- Inline styles removed and moved to CSS where possible -->
</head>

<body>
    <div id="app">
        <!-- Sidebar -->
        <nav class="admin-sidebar" aria-label="Main Navigation">
            <h1>ì˜ˆì•½ ê´€ë¦¬ì</h1>

            <!-- Navigation Items -->
            <a class="nav-item active" href="index.html" aria-current="page">
                <span>ì˜ˆì•½ ê´€ë¦¬</span>
            </a>
            <a class="nav-item" href="schedule.html">
                <span>ìŠ¤ì¼€ì¤„ ì„¤ì •</span>
            </a>
            <a class="nav-item" href="mds.html">
                <span>MD ê´€ë¦¬</span>
            </a>
            <a class="nav-item" href="notices.html">
                <span>ê³µì§€ì‚¬í•­ ê´€ë¦¬</span>
            </a>
            <a class="nav-item" href="blacklist.html">
                <span>ë¸”ë™ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬</span>
            </a>

            <!-- Meeting King Area -->
            <div id="meeting-king-area" class="meeting-king-area">
                <h3 class="meeting-king-title">ğŸ† ì´ë‹¬ì˜ ë¯¸íŒ…ì™•</h3>
                <div id="meeting-king-list"></div>
            </div>

            <div style="margin-top: var(--space-4);">
                <a href="../index.html" class="nav-item" style="color: var(--primary-600);">
                    <span>â† ì˜ˆì•½ í˜ì´ì§€</span>
                </a>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="admin-content">

            <!-- Header Section -->
            <header class="content-header">
                <div>
                    <span class="header-badge">Admin Dashboard</span>
                    <h2>ì˜ˆì•½ ê´€ë¦¬</h2>
                    <p>ì ‘ìˆ˜ëœ ì˜ˆì•½ í˜„í™©ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.</p>
                </div>
            </header>

            <!-- Reservation Management Section -->
            <section id="section-bookings" class="section-panel">

                <!-- Filters Toolbar -->
                <div
                    style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; margin-bottom: 20px;">
                    <!-- View Mode Tabs -->
                    <div class="view-filters" role="group" aria-label="View Filters">
                        <button class="filter-btn active" onclick="setViewMode('all')">ì „ì²´</button>
                        <button class="filter-btn" onclick="setViewMode('md')">MDë³„</button>
                        <button class="filter-btn" onclick="setViewMode('date')">ë‚ ì§œë³„</button>
                    </div>

                    <!-- Date Range Picker -->
                    <div class="date-filters">
                        <label for="filter-start-date" style="font-size: var(--text-sm); font-weight: 500;">ê¸°ê°„:</label>
                        <input type="date" id="filter-start-date" class="admin-input">
                        <span style="color: var(--gray-400);">~</span>
                        <input type="date" id="filter-end-date" class="admin-input">
                        <button id="btn-search-date" class="btn-primary">ì¡°íšŒ</button>
                    </div>
                </div>

                <!-- Data Table -->
                <div class="table-container">
                    <table id="bookings-table">
                        <thead>
                            <tr>
                                <th>ì‹ ì²­ì¼ì‹œ</th>
                                <th>MD</th>
                                <th>ì‹ ì²­ì</th>
                                <th>ì—°ë½ì²˜</th>
                                <th>ì˜ˆì•½ ì‹œê°„</th>
                                <th>ìƒíƒœ</th>
                                <!-- Status Badge will be applied via JS classes or inline styles if JS not updated -->
                                <th style="text-align: right;">ê´€ë¦¬</th>
                            </tr>
                        </thead>
                        <tbody id="bookings-tbody">
                            <!-- JS injects rows here -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <nav aria-label="Table pagination">
                    <div id="pagination-controls" class="pagination"></div>
                </nav>
            </section>

        </main>
    </div>

    <!-- Modal Dialog -->
    <div id="admin-detail-modal" class="modal-overlay" aria-modal="true" role="dialog" style="display: none;">
        <div class="modal-content">
            <button class="close-modal" onclick="closeDetailModal()" aria-label="Close modal">&times;</button>
            <h2 style="margin-bottom: var(--space-6); color: var(--primary-700);">ì˜ˆì•½ ìƒì„¸ ì •ë³´</h2>

            <div id="admin-modal-body">
                <!-- Details injected here -->
            </div>

            <div
                style="text-align: right; margin-top: var(--space-8); padding-top: var(--space-4); border-top: 1px solid var(--gray-200);">
                <button class="btn-secondary" onclick="closeDetailModal()">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <!-- Initialization Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Fix: Correctly initialize the existing date inputs for THIS page
            var today = new Date();
            var yyyy = today.getFullYear();
            var mm = String(today.getMonth() + 1).padStart(2, '0');
            var dd = String(today.getDate()).padStart(2, '0');
            var dateString = yyyy + '-' + mm + '-' + dd;

            var startEl = document.getElementById('filter-start-date');
            var endEl = document.getElementById('filter-end-date');

            if (startEl && !startEl.value) startEl.value = dateString;
            if (endEl && !endEl.value) endEl.value = dateString;
        });
    </script>

    <!-- Core Logic -->
    <script src="js/admin.js"></script>
</body>

</html>