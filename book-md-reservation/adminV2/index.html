<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 페이지 - 예약 관리 (V2)</title>
    <link rel="stylesheet" href="css/adminv2.css">
    <script src="https://image.yes24.com/sysimage/Contents/Scripts/m/jquery/jquery-3.5.1.min.js"></script>
</head>

<body>
    <div id="app">
        <!-- Sidebar (loaded dynamically by common.js) -->
        <nav class="admin-sidebar" aria-label="Main Navigation"></nav>

        <!-- Main Content -->
        <main class="admin-content">

            <!-- Header Section -->
            <header class="content-header">
                <div>
                    <span class="header-badge">Admin Dashboard</span>
                    <h2>예약 관리</h2>
                    <p>접수된 예약 현황을 실시간으로 확인하고 관리합니다.</p>
                </div>
            </header>

            <!-- Reservation Management Section -->
            <section id="section-bookings" class="section-panel">

                <!-- Filters Toolbar -->
                <div class="filter-toolbar">
                    <!-- View Mode Tabs -->
                    <div class="view-filters" role="group" aria-label="View Filters">
                        <button class="filter-btn active" onclick="setViewMode('all')">전체</button>
                        <button class="filter-btn" onclick="setViewMode('md')">PD별</button>
                        <button class="filter-btn" onclick="setViewMode('date')">날짜별</button>
                    </div>

                    <!-- Date Range Picker -->
                    <div class="date-filters">
                        <label for="filter-start-date">기간:</label>
                        <input type="date" id="filter-start-date" class="admin-input">
                        <span style="color: var(--gray-400);">~</span>
                        <input type="date" id="filter-end-date" class="admin-input">
                        <button id="btn-search-date" class="btn-primary">조회</button>
                    </div>
                </div>

                <!-- MD Filter + Status Filter -->
                <div class="filter-toolbar filter-toolbar-sub">
                    <div class="md-filter-group" id="md-filter-group">
                       
                        <div class="md-legend" id="filter-md-legend"></div>
                    </div>
                    <label class="checkbox-label" style="margin-left:auto;">
                        <input type="checkbox" id="filter-approved-only"> 예약확정만 보기
                    </label>
                </div>

                <!-- Data Table -->
                <div class="table-container">
                    <table id="bookings-table">
                        <colgroup>
                            <col style="width:16%">
                            <col style="width:10%">
                            <col style="width:18%">
                            <col style="width:14%">
                            <col style="width:16%">
                            <col style="width:10%">
                            <col style="width:16%">
                        </colgroup>
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="regist">신청일시 <span class="sort-icon"></span></th>
                                <th>PD</th>
                                <th>신청자</th>
                                <th>연락처</th>
                                <th class="sortable" data-sort="meeting">예약 시간 <span class="sort-icon"></span></th>
                                <th>상태</th>
                                <th style="text-align: right;">관리</th>
                            </tr>
                        </thead>
                        <tbody id="bookings-tbody"></tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <nav aria-label="Table pagination">
                    <div id="pagination-controls" class="pagination"></div>
                </nav>
            </section>

        </main>
    </div>

    <!-- Modal Dialog -->
    <div id="admin-detail-modal" class="modal-overlay" aria-modal="true" role="dialog" style="display: none;">
        <div class="modal-content">
            <button class="close-modal" onclick="closeDetailModal()" aria-label="Close modal">&times;</button>
            <h2 style="margin-bottom: var(--space-6); color: var(--primary-700);">예약 상세 정보</h2>
            <div id="admin-modal-body"></div>
            <div
                style="text-align: right; margin-top: var(--space-8); padding-top: var(--space-4); border-top: 1px solid var(--gray-200);">
                <button class="btn-secondary" onclick="closeDetailModal()">닫기</button>
            </div>
        </div>
    </div>

    <script src="js/common.js"></script>
    <script src="js/booking.js"></script>
</body>

</html>
